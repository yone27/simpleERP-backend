(this["webpackJsonpcliente-api"]=this["webpackJsonpcliente-api"]||[]).push([[0],{35:function(e,t,a){e.exports=a(64)},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),l=a.n(c),o=a(1),i=a(4),s=a(5),u=r.a.createContext([{},function(){}]),m=function(e){var t=Object(n.useState)({token:"",auth:!1}),a=Object(o.a)(t,2),c=a[0],l=a[1];return r.a.createElement(u.Provider,{value:[c,l]},e.children)},p=Object(s.f)((function(e){var t=Object(n.useContext)(u),a=Object(o.a)(t,2),c=a[0],l=a[1];return r.a.createElement("header",{className:"barra"},r.a.createElement("div",{className:"contenedor"},r.a.createElement("div",{className:"contenido-barra"},r.a.createElement("h1",null,"CRM - Administrador de Clientes"),c.auth?r.a.createElement("button",{type:"button",className:"btn btn-rojo",onClick:function(){l({token:"",auth:!1}),localStorage.setItem("token",""),e.history.push("/iniciar-sesion")}},r.a.createElement("i",{className:"far fa-times-circle"}),"Cerrar sesion"):null)))})),d=function(){var e=Object(n.useContext)(u);return Object(o.a)(e,1)[0].auth?r.a.createElement("aside",{className:"sidebar col-3"},r.a.createElement("h2",null,"Administraci\xf3n"),r.a.createElement("nav",{className:"navegacion"},r.a.createElement(i.b,{to:"/",className:"clientes"},"Clientes"),r.a.createElement(i.b,{to:"/productos",className:"productos"},"Productos"),r.a.createElement(i.b,{to:"/pedidos",className:"pedidos"},"Pedidos"))):null},b=a(2),E=a.n(b),f=a(6),h=a(34),v=a.n(h).a.create({baseURL:"https://react-nodeyone.herokuapp.com"}),g=a(3),j=a.n(g);var N=function(e){var t=e.cliente,a=e.consultarAPI,c=t._id,l=t.nombre,s=t.apellido,m=t.empresa,p=t.email,d=t.telefono,b=Object(n.useContext)(u),E=Object(o.a)(b,1)[0];return r.a.createElement("li",{className:"cliente"},r.a.createElement("div",{className:"info-cliente"},r.a.createElement("p",{className:"nombre"},l," ",s),r.a.createElement("p",{className:"empresa"}," ",m," "),r.a.createElement("p",null,p),r.a.createElement("p",null,"Tel: ",d)),r.a.createElement("div",{className:"acciones"},r.a.createElement(i.b,{to:"/clientes/editar/".concat(c),className:"btn btn-azul"},r.a.createElement("i",{className:"fas fa-pen-alt"}),"Editar Cliente"),r.a.createElement(i.b,{to:"/pedidos/nuevo/".concat(c),className:"btn btn-amarillo"},r.a.createElement("i",{className:"fas fa-pen-alt"}),"Nuevo pedido"),r.a.createElement("button",{type:"button",className:"btn btn-rojo btn-eliminar",onClick:function(){return e=c,void j.a.fire({title:"Estas seguro?",text:"Un cliente eliminado no se puede recuperar",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then((function(t){t.value&&v.delete("/clientes/".concat(e),{headers:{Authorization:"Bearer ".concat(E.token)}}).then((function(e){j.a.fire("Eliminado",e.data.mensaje,"success"),a()}))}));var e}},r.a.createElement("i",{className:"fas fa-times"}),"Eliminar Cliente")))};a(63);var O=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"dot1"}),r.a.createElement("div",{className:"dot2"}))};var x=Object(s.f)((function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],l=a[1],s=Object(n.useContext)(u),m=Object(o.a)(s,1)[0],p=Object(n.useCallback)(Object(f.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===m.token){t.next=13;break}return t.prev=1,t.next=4,v.get("/clientes",{headers:{Authorization:"Bearer ".concat(m.token)}});case 4:a=t.sent,l(a.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),500===t.t0.response.status&&e.history.push("/iniciar-sesion");case 11:t.next=14;break;case 13:e.history.push("/iniciar-sesion");case 14:case"end":return t.stop()}}),t,null,[[1,8]])}))),[m,e.history]);return Object(n.useEffect)((function(){p()}),[p]),m.auth||localStorage.getItem("token")===m.token||e.history.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Clientes"),r.a.createElement(i.b,{to:"/clientes/nuevo",className:"btn btn-verde"},r.a.createElement("i",{className:"fas fa-plus-circle"}),"Nuevo Cliente"),c.length?r.a.createElement("ul",{className:"listado-clientes"},c.map((function(e){return r.a.createElement(N,{key:e._id,cliente:e,consultarAPI:p})}))):r.a.createElement(O,null))})),y=a(12),k=a(8);var C=Object(s.f)((function(e){var t=e.history,a=Object(n.useState)({nombre:"",apellido:"",empresa:"",email:"",telefono:""}),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useContext)(u),m=Object(o.a)(s,1)[0],p=function(e){i(Object(k.a)(Object(k.a)({},l),{},Object(y.a)({},e.target.name,e.target.value)))},d=function(){var e=Object(f.a)(E.a.mark((function e(a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,v.post("/clientes",l,{headers:{Authorization:"Bearer ".concat(m.token)}});case 4:11e3===(n=e.sent).data.code?j.a.fire({type:"error",title:"Hubo un error",text:"Ese cliente ya esta registrado"}):j.a.fire("Se agreg\xf3 el cliente",n.data.mensaje,"success"),t.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),j.a.fire({type:"error",title:"Hubo un error",text:"Intentelo de nuevo"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return m.auth||localStorage.getItem("token")===m.token||t.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Nuevo Cliente"),r.a.createElement("form",{onSubmit:d},r.a.createElement("legend",null,"Llena todos los campos"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Cliente",name:"nombre",onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Apellido:"),r.a.createElement("input",{type:"text",placeholder:"Apellido Cliente",name:"apellido",onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Empresa:"),r.a.createElement("input",{type:"text",placeholder:"Empresa Cliente",name:"empresa",onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",placeholder:"Email Cliente",name:"email",onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Tel\xe9fono:"),r.a.createElement("input",{type:"tel",placeholder:"Tel\xe9fono Cliente",name:"telefono",onChange:p})),r.a.createElement("div",{className:"enviar"},r.a.createElement("input",{type:"submit",className:"btn btn-azul",value:"Agregar Cliente",disabled:function(){var e=l.nombre,t=l.apellido,a=l.email,n=l.empresa,r=l.telefono;return!e.length||!t.length||!a.length||!n.length||!r.length}()}))))}));var w=Object(s.f)((function(e){var t=e.match.params.id,a=Object(n.useState)({nombre:"",apellido:"",empresa:"",email:"",telefono:""}),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useContext)(u),m=Object(o.a)(s,1)[0];Object(n.useEffect)((function(){(function(){var a=Object(f.a)(E.a.mark((function a(){var n;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(""===m.token){a.next=13;break}return a.prev=1,a.next=4,v.get("/clientes/".concat(t),{headers:{Authorization:"Bearer ".concat(m.token)}});case 4:n=a.sent,i(n.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),500===a.t0.response.status&&e.history.push("/iniciar-sesion");case 11:a.next=14;break;case 13:e.history.push("/iniciar-sesion");case 14:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(){return a.apply(this,arguments)}})()()}),[t,m,e.history]);var p=function(e){i(Object(k.a)(Object(k.a)({},l),{},Object(y.a)({},e.target.name,e.target.value)))};return m.auth||localStorage.getItem("token")!==m.token||e.history.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Editar Cliente"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),v.put("clientes/".concat(l._id),l,{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(t){11e3===t.data.code?(j.a.fire({type:"error",title:"Hubo un error",text:"Ese correo ya esta registrado"}),console.log("Error de duplicado de mongo")):j.a.fire("Correcto","Se actualiz\xf3 correctamente","success"),e.history.push("/")}))}},r.a.createElement("legend",null,"Llena todos los campos"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Cliente",name:"nombre",value:l.nombre,onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Apellido:"),r.a.createElement("input",{type:"text",placeholder:"Apellido Cliente",name:"apellido",value:l.apellido,onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Empresa:"),r.a.createElement("input",{type:"text",placeholder:"Empresa Cliente",name:"empresa",value:l.empresa,onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",placeholder:"Email Cliente",name:"email",value:l.email,onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Tel\xe9fono:"),r.a.createElement("input",{type:"tel",placeholder:"Tel\xe9fono Cliente",name:"telefono",value:l.telefono,onChange:p})),r.a.createElement("div",{className:"enviar"},r.a.createElement("input",{type:"submit",className:"btn btn-azul",value:"Guardar Cliente",disabled:function(){var e=l.nombre,t=l.apellido,a=l.email,n=l.empresa,r=l.telefono;return!e.length||!t.length||!a.length||!n.length||!r.length}()}))))}));var P=function(e){var t=e.producto,a=e.consultarAPI,c=t._id,l=t.nombre,s=t.precio,m=t.imagen,p=Object(n.useContext)(u),d=Object(o.a)(p,1)[0];return r.a.createElement("li",{className:"producto"},r.a.createElement("div",{className:"info-producto"},r.a.createElement("p",{className:"nombre"},l),r.a.createElement("p",{className:"precio"},"$ ",s),m?r.a.createElement("img",{src:"http://localhost:5000/".concat(m),alt:"imagen"}):null),r.a.createElement("div",{className:"acciones"},r.a.createElement(i.b,{to:"/productos/editar/".concat(c),className:"btn btn-azul"},r.a.createElement("i",{className:"fas fa-pen-alt"}),"Editar Producto"),r.a.createElement("button",{type:"button",className:"btn btn-rojo btn-eliminar",onClick:function(){return e=c,void j.a.fire({title:"Estas seguro?",text:"Un producto eliminado no se puede recuperar",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then((function(t){t.value&&v.delete("/productos/".concat(e),{headers:{Authorization:"Bearer ".concat(d.token)}}).then((function(e){j.a.fire("Eliminado",e.data.mensaje,"success"),a()}))}));var e}},r.a.createElement("i",{className:"fas fa-times"}),"Eliminar Cliente")))};var S=Object(s.f)((function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],l=a[1],s=Object(n.useContext)(u),m=Object(o.a)(s,1)[0],p=Object(n.useCallback)(Object(f.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===m.token){t.next=13;break}return t.prev=1,t.next=4,v.get("/productos",{headers:{Authorization:"Bearer ".concat(m.token)}});case 4:a=t.sent,l(a.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),500===t.t0.response.status&&e.history.push("/iniciar-sesion");case 11:t.next=14;break;case 13:e.history.push("/iniciar-sesion");case 14:case"end":return t.stop()}}),t,null,[[1,8]])}))),[m,e.history]);return Object(n.useEffect)((function(){p()}),[p]),m.auth||localStorage.getItem("token")===m.token||e.history.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Productos"),r.a.createElement(i.b,{to:"/productos/nuevo",className:"btn btn-verde nvo-cliente"}," ",r.a.createElement("i",{className:"fas fa-plus-circle"}),"Nuevo Producto"),c.length?r.a.createElement("ul",{className:"listado-productos"},c.map((function(e){return r.a.createElement(P,{key:e._id,producto:e,consultarAPI:p})}))):r.a.createElement(O,null))}));var A=Object(s.f)((function(e){var t=Object(n.useState)({nombre:"",precio:""}),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)({file:"",imagePreview:""}),s=Object(o.a)(i,2),m=s[0],p=s[1],d=Object(n.useContext)(u),b=Object(o.a)(d,1)[0],h=function(){var t=Object(f.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=new FormData).append("nombre",c.nombre),n.append("precio",c.precio),n.append("imagen",m.file),t.prev=5,t.next=8,v.post("/productos",n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(b.token)}});case 8:200===(r=t.sent).status&&j.a.fire("Agregado correctamente",r.data.mensaje,"success"),e.history.push("/productos"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0),j.a.fire({type:"error",title:"Hubo un error",text:"Vuelva a intentarlo"});case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}(),g=function(e){l(Object(k.a)(Object(k.a)({},c),{},Object(y.a)({},e.target.name,e.target.value)))};return b.auth||localStorage.getItem("token")===b.token||e.history.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"NuevoProducto"),r.a.createElement("form",{onSubmit:h},r.a.createElement("legend",null,"Llena todos los campos"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Producto",name:"nombre",onChange:g})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Precio:"),r.a.createElement("input",{type:"number",name:"precio",min:"0.00",step:"0.01",placeholder:"Precio",onChange:g})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Imagen:"),m?r.a.createElement("img",{src:m.imagePreview,alt:"imagen",width:"200"}):null,r.a.createElement("input",{type:"file",name:"imagen",onChange:function(e){p({file:e.target.files[0],imagePreview:URL.createObjectURL(e.target.files[0])})}})),r.a.createElement("div",{className:"enviar"},r.a.createElement("input",{type:"submit",className:"btn btn-azul",value:"Agregar Producto"}))))}));var B=Object(s.f)((function(e){var t=e.match.params.id,a=Object(n.useState)({nombre:"",precio:"",imagen:""}),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useContext)(u),m=Object(o.a)(s,1)[0],p=Object(n.useState)({file:"",imagePreview:""}),d=Object(o.a)(p,2),b=d[0],h=d[1];Object(n.useEffect)((function(){(function(){var e=Object(f.a)(E.a.mark((function e(){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/productos/".concat(t),{headers:{Authorization:"Bearer ".concat(m.token)}});case 2:a=e.sent,i(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,m]);var g=function(){var a=Object(f.a)(E.a.mark((function a(n){var r,c;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),(r=new FormData).append("nombre",l.nombre),r.append("precio",l.precio),r.append("imagen",b.file),a.prev=5,a.next=8,v.put("/productos/".concat(t),r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(m.token)}});case 8:200===(c=a.sent).status&&j.a.fire("Editado correctamente",c.data.mensaje,"success"),e.history.push("/productos"),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(5),j.a.fire({type:"error",title:"Hubo un error",text:"Vuelva a intentarlo"});case 16:case"end":return a.stop()}}),a,null,[[5,13]])})));return function(e){return a.apply(this,arguments)}}(),N=function(e){i(Object(k.a)(Object(k.a)({},l),{},Object(y.a)({},e.target.name,e.target.value)))},O=l.nombre,x=l.precio,C=l.imagen;return m.auth||localStorage.getItem("token")===m.token||e.history.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"EditarProducto"),r.a.createElement("form",{onSubmit:g},r.a.createElement("legend",null,"Llena todos los campos"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Producto",name:"nombre",onChange:N,defaultValue:O})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Precio:"),r.a.createElement("input",{type:"number",name:"precio",min:"0.00",step:"0.01",placeholder:"Precio",defaultValue:x,onChange:N})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Imagen:"),b.imagePreview?r.a.createElement("img",{src:b.imagePreview,alt:"imagen",width:"200"}):r.a.createElement("img",{src:"http://localhost:5000/".concat(C),alt:"imagen",width:"200"}),r.a.createElement("input",{type:"file",name:"imagen",onChange:function(e){h({file:e.target.files[0],imagePreview:URL.createObjectURL(e.target.files[0])})}})),r.a.createElement("div",{className:"enviar"},r.a.createElement("input",{type:"submit",className:"btn btn-azul",value:"Editar Producto"}))))})),z=function(e){var t=e.pedido;return r.a.createElement("li",{className:"pedido"},r.a.createElement("div",{className:"info-pedido"},r.a.createElement("p",{className:"id"},"ID: "),r.a.createElement("p",{className:"nombre"},"Cliente: ",t.cliente.nombre," ",t.cliente.apellido),r.a.createElement("div",{className:"articulos-pedido"},r.a.createElement("p",{className:"productos"},"Art\xedculos Pedido: "),r.a.createElement("ul",null,t.pedido.map((function(e){return r.a.createElement("li",{key:t._id+e.producto._id},r.a.createElement("p",null,e.producto.nombre),r.a.createElement("p",null,"Precio: ",e.producto.precio),r.a.createElement("p",null,"Cantidad: ",e.cantidad))})))),r.a.createElement("p",{className:"total"},"Total: $",t.total," ")),r.a.createElement("div",{className:"acciones"},r.a.createElement("button",{type:"button",className:"btn btn-rojo btn-eliminar"},r.a.createElement("i",{className:"fas fa-times"}),"Eliminar Pedido")))};var I=function(e){var t=e.history,a=Object(n.useState)([]),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useContext)(u),m=Object(o.a)(s,1)[0];return Object(n.useEffect)((function(){(function(){var e=Object(f.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/pedidos",{headers:{Authorization:"Bearer ".concat(m.token)}});case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[m]),m.auth||localStorage.getItem("token")===m.token||t.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Pedidos"),l.length?r.a.createElement("ul",{className:"listado-pedidos"},l.map((function(e){return r.a.createElement(z,{key:e._id,pedido:e})}))):r.a.createElement("h3",null,"No hay m\xe1s pedidos"))},D=a(18);var T=function(e){return r.a.createElement("form",{onSubmit:e.buscarProducto},r.a.createElement("legend",null,"Busca un Producto y agrega una cantidad"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Productos:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Productos",name:"productos",onChange:e.leerDatosBusqueda})),r.a.createElement("input",{type:"submit",className:"btn btn-azul btn-block"}))};var F=function(e){var t=e.producto,a=e.restarProductos,n=e.sumarProductos,c=e.index,l=e.eliminarProductoPedido;return r.a.createElement("li",null,r.a.createElement("div",{className:"texto-producto"},r.a.createElement("p",{className:"nombre"},t.nombre),r.a.createElement("p",{className:"precio"},t.precio)),r.a.createElement("div",{className:"acciones"},r.a.createElement("div",{className:"contenedor-cantidad"},r.a.createElement("i",{className:"fas fa-minus",onClick:function(){return a(c)}}),r.a.createElement("p",null,t.cantidad),r.a.createElement("i",{className:"fas fa-plus",onClick:function(){return n(c)}})),r.a.createElement("button",{type:"button",className:"btn btn-rojo",onClick:function(){return l(t._id)}},r.a.createElement("i",{className:"fas fa-minus-circle"}),"Eliminar Producto")))};var L=Object(s.f)((function(e){var t=e.match.params.id,a=Object(n.useState)({}),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)(""),m=Object(o.a)(s,2),p=m[0],d=m[1],b=Object(n.useState)([]),h=Object(o.a)(b,2),g=h[0],N=h[1],O=Object(n.useState)(0),x=Object(o.a)(O,2),y=x[0],k=x[1],C=Object(n.useContext)(u),w=Object(o.a)(C,1)[0];Object(n.useEffect)((function(){(function(){var e=Object(f.a)(E.a.mark((function e(){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/clientes/".concat(t),{headers:{Authorization:"Bearer ".concat(w.token)}});case 2:a=e.sent,i(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),function(){if(0!==g.length){var e=0;g.map((function(t){return e+=t.cantidad*t.precio})),k(e)}else k(0)}()}),[g,t,w]);var P=function(){var e=Object(f.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v.post("/productos/busqueda/".concat(p),{headers:{Authorization:"Bearer ".concat(w.token)}});case 3:(a=e.sent).data[0]?((n=a.data[0]).producto=a.data[0]._id,n.cantidad=0,N([].concat(Object(D.a)(g),[n]))):j.a.fire({type:"error",title:"No resultados",text:"No hay resultados"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=Object(D.a)(g);0!==t[e].cantidad&&(t[e].cantidad--,N(t))},A=function(e){var t=Object(D.a)(g);t[e].cantidad++,N(t)},B=function(e){var t=g.filter((function(t){return t.producto!==e}));N(t)},z=function(){var a=Object(f.a)(E.a.mark((function a(n){var r,c;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r={cliente:t,pedido:g,total:y},a.next=4,v.post("/pedidos",r,{headers:{Authorization:"Bearer ".concat(w.token)}});case 4:200===(c=a.sent).status?j.a.fire({type:"success",title:"Correcto",text:c.data.mensaje}):j.a.fire({type:"error",title:"Hubo un error",text:"Vuelva a intentarlo"}),e.history.push("/pedidos");case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return w.auth||localStorage.getItem("token")===w.token||e.history.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"ficha-cliente"},r.a.createElement("h3",null,"Datos de Cliente"),r.a.createElement("p",null,l.nombre," ",l.apellido),r.a.createElement("p",null,l.telefono)),r.a.createElement(T,{buscarProducto:P,leerDatosBusqueda:function(e){d(e.target.value)}}),r.a.createElement("ul",{className:"resumen"},g.map((function(e,t){return r.a.createElement(F,{producto:e,key:e.producto,restarProductos:S,sumarProductos:A,index:t,eliminarProductoPedido:B})}))),r.a.createElement("p",{className:"total"},"Total a pagar: ",r.a.createElement("span",null,"$",y," ")),y>0?r.a.createElement("form",{onSubmit:z},r.a.createElement("div",{className:"enviar"},r.a.createElement("input",{type:"submit",className:"btn btn-azul",value:"Agregar Pedido"}))):null)})),_=Object(s.f)((function(e){var t=Object(n.useContext)(u),a=Object(o.a)(t,2)[1],c=Object(n.useState)({}),l=Object(o.a)(c,2),i=l[0],s=l[1],m=function(){var t=Object(f.a)(E.a.mark((function t(n){var r,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,v.post("/iniciar-sesion",i);case 4:r=t.sent,c=r.data.token,localStorage.setItem("token",c),a({token:c,auth:!0}),j.a.fire("Login correcto","Has iniciado sesi\xf3n","success"),e.history.push("/"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),j.a.fire({type:"error",title:"Hubo un error",text:t.t0.response.data.mensaje});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),p=function(e){s(Object(k.a)(Object(k.a)({},i),{},Object(y.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"login"},r.a.createElement("h2",null,"Iniciar Sesi\xf3n"),r.a.createElement("div",{className:"contenedor-formulario"},r.a.createElement("form",{onSubmit:m},r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email para iniciar sesi\xf3n",required:!0,onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password para iniciar sesi\xf3n",required:!0,onChange:p})),r.a.createElement("p",null,"User: test@test.com Pass: 123456"),r.a.createElement("input",{type:"submit",value:"iniciar sesi\xf3n",className:"btn btn-azul btn-block"}))))})),H=function(){var e=Object(n.useContext)(u),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(i.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(m,{value:[a,c]},r.a.createElement(p,null),r.a.createElement("div",{className:"grid contenedor contenido-principal"},r.a.createElement(d,null),r.a.createElement("main",{className:"caja-contenido col-9"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:x}),r.a.createElement(s.a,{exact:!0,path:"/clientes/nuevo",component:C}),r.a.createElement(s.a,{exact:!0,path:"/clientes/editar/:id",component:w}),r.a.createElement(s.a,{exact:!0,path:"/productos",component:S}),r.a.createElement(s.a,{exact:!0,path:"/productos/nuevo",component:A}),r.a.createElement(s.a,{exact:!0,path:"/productos/editar/:id",component:B}),r.a.createElement(s.a,{exact:!0,path:"/pedidos",component:I}),r.a.createElement(s.a,{exact:!0,path:"/pedidos/nuevo/:id",component:L}),r.a.createElement(s.a,{exact:!0,path:"/iniciar-sesion",component:_})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.de7f69a3.chunk.js.map